<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ICU 69.1: utf8.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ICU 69.1
   &#160;<span id="projectnumber">69.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_f59c6450ff718ff1b085cfd1c36acbd7.html">unicode</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">utf8.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>C API: 8-bit Unicode handling macros.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;<a class="el" href="umachine_8h_source.html">unicode/umachine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utf_8h_source.html">unicode/utf.h</a>&quot;</code><br />
</div>
<p><a href="utf8_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae534bfef078b4f5d09e8da543a779db7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#ae534bfef078b4f5d09e8da543a779db7">U8_COUNT_TRAIL_BYTES</a>(leadByte)</td></tr>
<tr class="memdesc:ae534bfef078b4f5d09e8da543a779db7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counts the trail bytes for a UTF-8 lead byte.  <a href="utf8_8h.html#ae534bfef078b4f5d09e8da543a779db7">More...</a><br /></td></tr>
<tr class="separator:ae534bfef078b4f5d09e8da543a779db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32281421a1d07ef0de83e7f44c5d7ba2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a32281421a1d07ef0de83e7f44c5d7ba2">U8_COUNT_TRAIL_BYTES_UNSAFE</a>(leadByte)&#160;&#160;&#160;    (((uint8_t)(leadByte)&gt;=0xc2)+((uint8_t)(leadByte)&gt;=0xe0)+((uint8_t)(leadByte)&gt;=0xf0))</td></tr>
<tr class="memdesc:a32281421a1d07ef0de83e7f44c5d7ba2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counts the trail bytes for a UTF-8 lead byte of a valid UTF-8 sequence.  <a href="utf8_8h.html#a32281421a1d07ef0de83e7f44c5d7ba2">More...</a><br /></td></tr>
<tr class="separator:a32281421a1d07ef0de83e7f44c5d7ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ed1045986b8bf27814e9bc78388961"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#ae8ed1045986b8bf27814e9bc78388961">U8_MASK_LEAD_BYTE</a>(leadByte,  countTrailBytes)&#160;&#160;&#160;((leadByte)&amp;=(1&lt;&lt;(6-(countTrailBytes)))-1)</td></tr>
<tr class="memdesc:ae8ed1045986b8bf27814e9bc78388961"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mask a UTF-8 lead byte, leave only the lower bits that form part of the code point value.  <a href="utf8_8h.html#ae8ed1045986b8bf27814e9bc78388961">More...</a><br /></td></tr>
<tr class="separator:ae8ed1045986b8bf27814e9bc78388961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabfe8ee746b8025ec80ed1977e8ae3c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#aabfe8ee746b8025ec80ed1977e8ae3c6">U8_LEAD3_T1_BITS</a>&#160;&#160;&#160;&quot;\x20\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x10\x30\x30&quot;</td></tr>
<tr class="memdesc:aabfe8ee746b8025ec80ed1977e8ae3c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal bit vector for 3-byte UTF-8 validity check, for use in U8_IS_VALID_LEAD3_AND_T1.  <a href="utf8_8h.html#aabfe8ee746b8025ec80ed1977e8ae3c6">More...</a><br /></td></tr>
<tr class="separator:aabfe8ee746b8025ec80ed1977e8ae3c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a06eab6584d228ea835b424e0591aec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a3a06eab6584d228ea835b424e0591aec">U8_IS_VALID_LEAD3_AND_T1</a>(lead,  t1)&#160;&#160;&#160;(<a class="el" href="utf8_8h.html#aabfe8ee746b8025ec80ed1977e8ae3c6">U8_LEAD3_T1_BITS</a>[(lead)&amp;0xf]&amp;(1&lt;&lt;((uint8_t)(t1)&gt;&gt;5)))</td></tr>
<tr class="memdesc:a3a06eab6584d228ea835b424e0591aec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal 3-byte UTF-8 validity check.  <a href="utf8_8h.html#a3a06eab6584d228ea835b424e0591aec">More...</a><br /></td></tr>
<tr class="separator:a3a06eab6584d228ea835b424e0591aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b00ab82ca3e89d24c4088b2b4e9416"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#ab7b00ab82ca3e89d24c4088b2b4e9416">U8_LEAD4_T1_BITS</a>&#160;&#160;&#160;&quot;\x00\x00\x00\x00\x00\x00\x00\x00\x1E\x0F\x0F\x0F\x00\x00\x00\x00&quot;</td></tr>
<tr class="memdesc:ab7b00ab82ca3e89d24c4088b2b4e9416"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal bit vector for 4-byte UTF-8 validity check, for use in U8_IS_VALID_LEAD4_AND_T1.  <a href="utf8_8h.html#ab7b00ab82ca3e89d24c4088b2b4e9416">More...</a><br /></td></tr>
<tr class="separator:ab7b00ab82ca3e89d24c4088b2b4e9416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5525576b42e8b7b4240153d9403c47a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a5525576b42e8b7b4240153d9403c47a2">U8_IS_VALID_LEAD4_AND_T1</a>(lead,  t1)&#160;&#160;&#160;(<a class="el" href="utf8_8h.html#ab7b00ab82ca3e89d24c4088b2b4e9416">U8_LEAD4_T1_BITS</a>[(uint8_t)(t1)&gt;&gt;4]&amp;(1&lt;&lt;((lead)&amp;7)))</td></tr>
<tr class="memdesc:a5525576b42e8b7b4240153d9403c47a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal 4-byte UTF-8 validity check.  <a href="utf8_8h.html#a5525576b42e8b7b4240153d9403c47a2">More...</a><br /></td></tr>
<tr class="separator:a5525576b42e8b7b4240153d9403c47a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f3a9427d880458a9fa6b169a3cc1b3c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a8f3a9427d880458a9fa6b169a3cc1b3c">U8_IS_SINGLE</a>(c)&#160;&#160;&#160;(((c)&amp;0x80)==0)</td></tr>
<tr class="memdesc:a8f3a9427d880458a9fa6b169a3cc1b3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does this code unit (byte) encode a code point by itself (US-ASCII 0..0x7f)?  <a href="utf8_8h.html#a8f3a9427d880458a9fa6b169a3cc1b3c">More...</a><br /></td></tr>
<tr class="separator:a8f3a9427d880458a9fa6b169a3cc1b3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9837ea38dd811524a5b761ddc2a2ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#adb9837ea38dd811524a5b761ddc2a2ca">U8_IS_LEAD</a>(c)&#160;&#160;&#160;((uint8_t)((c)-0xc2)&lt;=0x32)</td></tr>
<tr class="memdesc:adb9837ea38dd811524a5b761ddc2a2ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this code unit (byte) a UTF-8 lead byte? (0xC2..0xF4)  <a href="utf8_8h.html#adb9837ea38dd811524a5b761ddc2a2ca">More...</a><br /></td></tr>
<tr class="separator:adb9837ea38dd811524a5b761ddc2a2ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afed9fc9bf480bf15a2e6051774f2d80e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>(c)&#160;&#160;&#160;((int8_t)(c)&lt;-0x40)</td></tr>
<tr class="memdesc:afed9fc9bf480bf15a2e6051774f2d80e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this code unit (byte) a UTF-8 trail byte? (0x80..0xBF)  <a href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">More...</a><br /></td></tr>
<tr class="separator:afed9fc9bf480bf15a2e6051774f2d80e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1730b8bbb3053465ee58702821846f1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#af1730b8bbb3053465ee58702821846f1">U8_LENGTH</a>(c)</td></tr>
<tr class="memdesc:af1730b8bbb3053465ee58702821846f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many code units (bytes) are used for the UTF-8 encoding of this Unicode code point?  <a href="utf8_8h.html#af1730b8bbb3053465ee58702821846f1">More...</a><br /></td></tr>
<tr class="separator:af1730b8bbb3053465ee58702821846f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2298b48749d9f45772c8f5a6885464a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#aa2298b48749d9f45772c8f5a6885464a">U8_MAX_LENGTH</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:aa2298b48749d9f45772c8f5a6885464a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of UTF-8 code units (bytes) per Unicode code point (U+0000..U+10ffff).  <a href="utf8_8h.html#aa2298b48749d9f45772c8f5a6885464a">More...</a><br /></td></tr>
<tr class="separator:aa2298b48749d9f45772c8f5a6885464a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a125e5e7a4ef2f3f57b078f706b2b67f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a125e5e7a4ef2f3f57b078f706b2b67f8">U8_GET_UNSAFE</a>(s,  i,  c)</td></tr>
<tr class="memdesc:a125e5e7a4ef2f3f57b078f706b2b67f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a code point from a string at a random-access offset, without changing the offset.  <a href="utf8_8h.html#a125e5e7a4ef2f3f57b078f706b2b67f8">More...</a><br /></td></tr>
<tr class="separator:a125e5e7a4ef2f3f57b078f706b2b67f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10a57a084d75604c4a81fb5eec46ae6a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a10a57a084d75604c4a81fb5eec46ae6a">U8_GET</a>(s,  start,  i,  length,  c)</td></tr>
<tr class="memdesc:a10a57a084d75604c4a81fb5eec46ae6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a code point from a string at a random-access offset, without changing the offset.  <a href="utf8_8h.html#a10a57a084d75604c4a81fb5eec46ae6a">More...</a><br /></td></tr>
<tr class="separator:a10a57a084d75604c4a81fb5eec46ae6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad13323ca441892bdb6b49b6954ab9ffb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#ad13323ca441892bdb6b49b6954ab9ffb">U8_GET_OR_FFFD</a>(s,  start,  i,  length,  c)</td></tr>
<tr class="memdesc:ad13323ca441892bdb6b49b6954ab9ffb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a code point from a string at a random-access offset, without changing the offset.  <a href="utf8_8h.html#ad13323ca441892bdb6b49b6954ab9ffb">More...</a><br /></td></tr>
<tr class="separator:ad13323ca441892bdb6b49b6954ab9ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28ecdb4233301285fc4ce7f9ea1ed644"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a28ecdb4233301285fc4ce7f9ea1ed644">U8_NEXT_UNSAFE</a>(s,  i,  c)</td></tr>
<tr class="memdesc:a28ecdb4233301285fc4ce7f9ea1ed644"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a code point from a string at a code point boundary offset, and advance the offset to the next code point boundary.  <a href="utf8_8h.html#a28ecdb4233301285fc4ce7f9ea1ed644">More...</a><br /></td></tr>
<tr class="separator:a28ecdb4233301285fc4ce7f9ea1ed644"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f3e5429ae4edb27a42367c627aa482"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a57f3e5429ae4edb27a42367c627aa482">U8_NEXT</a>(s,  i,  length,  c)&#160;&#160;&#160;<a class="el" href="utf8_8h.html#a27c3748113bc63347a7fa3a4b2c71029">U8_INTERNAL_NEXT_OR_SUB</a>(s, i, length, c, <a class="el" href="umachine_8h.html#a807436737b76a72b76ddf0b900304b4a">U_SENTINEL</a>)</td></tr>
<tr class="memdesc:a57f3e5429ae4edb27a42367c627aa482"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a code point from a string at a code point boundary offset, and advance the offset to the next code point boundary.  <a href="utf8_8h.html#a57f3e5429ae4edb27a42367c627aa482">More...</a><br /></td></tr>
<tr class="separator:a57f3e5429ae4edb27a42367c627aa482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dda2b78867c9d648ad5a0f400fdb1b4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a7dda2b78867c9d648ad5a0f400fdb1b4">U8_NEXT_OR_FFFD</a>(s,  i,  length,  c)&#160;&#160;&#160;<a class="el" href="utf8_8h.html#a27c3748113bc63347a7fa3a4b2c71029">U8_INTERNAL_NEXT_OR_SUB</a>(s, i, length, c, 0xfffd)</td></tr>
<tr class="memdesc:a7dda2b78867c9d648ad5a0f400fdb1b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a code point from a string at a code point boundary offset, and advance the offset to the next code point boundary.  <a href="utf8_8h.html#a7dda2b78867c9d648ad5a0f400fdb1b4">More...</a><br /></td></tr>
<tr class="separator:a7dda2b78867c9d648ad5a0f400fdb1b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27c3748113bc63347a7fa3a4b2c71029"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a27c3748113bc63347a7fa3a4b2c71029">U8_INTERNAL_NEXT_OR_SUB</a>(s,  i,  length,  c,  sub)</td></tr>
<tr class="separator:a27c3748113bc63347a7fa3a4b2c71029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a154f04764da5af41729c4df6bf9e09f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a154f04764da5af41729c4df6bf9e09f3">U8_APPEND_UNSAFE</a>(s,  i,  c)</td></tr>
<tr class="memdesc:a154f04764da5af41729c4df6bf9e09f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a code point to a string, overwriting 1 to 4 bytes.  <a href="utf8_8h.html#a154f04764da5af41729c4df6bf9e09f3">More...</a><br /></td></tr>
<tr class="separator:a154f04764da5af41729c4df6bf9e09f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a013997e3d13c501ce73bc45e662881"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a8a013997e3d13c501ce73bc45e662881">U8_APPEND</a>(s,  i,  capacity,  c,  isError)</td></tr>
<tr class="memdesc:a8a013997e3d13c501ce73bc45e662881"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a code point to a string, overwriting 1 to 4 bytes.  <a href="utf8_8h.html#a8a013997e3d13c501ce73bc45e662881">More...</a><br /></td></tr>
<tr class="separator:a8a013997e3d13c501ce73bc45e662881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64a8113aea2125f806cbf5d77294b3cd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a64a8113aea2125f806cbf5d77294b3cd">U8_FWD_1_UNSAFE</a>(s,  i)</td></tr>
<tr class="memdesc:a64a8113aea2125f806cbf5d77294b3cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the string offset from one code point boundary to the next.  <a href="utf8_8h.html#a64a8113aea2125f806cbf5d77294b3cd">More...</a><br /></td></tr>
<tr class="separator:a64a8113aea2125f806cbf5d77294b3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d4c94e845b059fddba0c51e9bad87fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a6d4c94e845b059fddba0c51e9bad87fd">U8_FWD_1</a>(s,  i,  length)</td></tr>
<tr class="memdesc:a6d4c94e845b059fddba0c51e9bad87fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the string offset from one code point boundary to the next.  <a href="utf8_8h.html#a6d4c94e845b059fddba0c51e9bad87fd">More...</a><br /></td></tr>
<tr class="separator:a6d4c94e845b059fddba0c51e9bad87fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e8b4218834110431798cc84a0a664ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a8e8b4218834110431798cc84a0a664ae">U8_FWD_N_UNSAFE</a>(s,  i,  n)</td></tr>
<tr class="memdesc:a8e8b4218834110431798cc84a0a664ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the string offset from one code point boundary to the n-th next one, i.e., move forward by n code points.  <a href="utf8_8h.html#a8e8b4218834110431798cc84a0a664ae">More...</a><br /></td></tr>
<tr class="separator:a8e8b4218834110431798cc84a0a664ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a311dc48b8aa1050345b886adabf213"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a9a311dc48b8aa1050345b886adabf213">U8_FWD_N</a>(s,  i,  length,  n)</td></tr>
<tr class="memdesc:a9a311dc48b8aa1050345b886adabf213"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the string offset from one code point boundary to the n-th next one, i.e., move forward by n code points.  <a href="utf8_8h.html#a9a311dc48b8aa1050345b886adabf213">More...</a><br /></td></tr>
<tr class="separator:a9a311dc48b8aa1050345b886adabf213"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac46a385dbf64c97337522e1d1875a57e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#ac46a385dbf64c97337522e1d1875a57e">U8_SET_CP_START_UNSAFE</a>(s,  i)</td></tr>
<tr class="memdesc:ac46a385dbf64c97337522e1d1875a57e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust a random-access offset to a code point boundary at the start of a code point.  <a href="utf8_8h.html#ac46a385dbf64c97337522e1d1875a57e">More...</a><br /></td></tr>
<tr class="separator:ac46a385dbf64c97337522e1d1875a57e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d33627a8a5420a8f61e50da2aeca2a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#aa6d33627a8a5420a8f61e50da2aeca2a">U8_SET_CP_START</a>(s,  start,  i)</td></tr>
<tr class="memdesc:aa6d33627a8a5420a8f61e50da2aeca2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust a random-access offset to a code point boundary at the start of a code point.  <a href="utf8_8h.html#aa6d33627a8a5420a8f61e50da2aeca2a">More...</a><br /></td></tr>
<tr class="separator:aa6d33627a8a5420a8f61e50da2aeca2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47528ebb663f83216167be4d28b59230"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a47528ebb663f83216167be4d28b59230">U8_TRUNCATE_IF_INCOMPLETE</a>(s,  start,  length)</td></tr>
<tr class="memdesc:a47528ebb663f83216167be4d28b59230"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the string ends with a UTF-8 byte sequence that is valid so far but incomplete, then reduce the length of the string to end before the lead byte of that incomplete sequence.  <a href="utf8_8h.html#a47528ebb663f83216167be4d28b59230">More...</a><br /></td></tr>
<tr class="separator:a47528ebb663f83216167be4d28b59230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f78eb19a6b25f61dccbae45d6ecf955"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a5f78eb19a6b25f61dccbae45d6ecf955">U8_PREV_UNSAFE</a>(s,  i,  c)</td></tr>
<tr class="memdesc:a5f78eb19a6b25f61dccbae45d6ecf955"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the string offset from one code point boundary to the previous one and get the code point between them.  <a href="utf8_8h.html#a5f78eb19a6b25f61dccbae45d6ecf955">More...</a><br /></td></tr>
<tr class="separator:a5f78eb19a6b25f61dccbae45d6ecf955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17287c1f01ce84fdf8852a756643b076"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a17287c1f01ce84fdf8852a756643b076">U8_PREV</a>(s,  start,  i,  c)</td></tr>
<tr class="memdesc:a17287c1f01ce84fdf8852a756643b076"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the string offset from one code point boundary to the previous one and get the code point between them.  <a href="utf8_8h.html#a17287c1f01ce84fdf8852a756643b076">More...</a><br /></td></tr>
<tr class="separator:a17287c1f01ce84fdf8852a756643b076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeef5d89106e5cf1c48727100c0b315bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#aeef5d89106e5cf1c48727100c0b315bd">U8_PREV_OR_FFFD</a>(s,  start,  i,  c)</td></tr>
<tr class="memdesc:aeef5d89106e5cf1c48727100c0b315bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the string offset from one code point boundary to the previous one and get the code point between them.  <a href="utf8_8h.html#aeef5d89106e5cf1c48727100c0b315bd">More...</a><br /></td></tr>
<tr class="separator:aeef5d89106e5cf1c48727100c0b315bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3969beb6252f8605ab678990c8af2f48"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a3969beb6252f8605ab678990c8af2f48">U8_BACK_1_UNSAFE</a>(s,  i)</td></tr>
<tr class="memdesc:a3969beb6252f8605ab678990c8af2f48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the string offset from one code point boundary to the previous one.  <a href="utf8_8h.html#a3969beb6252f8605ab678990c8af2f48">More...</a><br /></td></tr>
<tr class="separator:a3969beb6252f8605ab678990c8af2f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac4ee359e6233cb2990b1047fd5be3c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#adac4ee359e6233cb2990b1047fd5be3c">U8_BACK_1</a>(s,  start,  i)</td></tr>
<tr class="memdesc:adac4ee359e6233cb2990b1047fd5be3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the string offset from one code point boundary to the previous one.  <a href="utf8_8h.html#adac4ee359e6233cb2990b1047fd5be3c">More...</a><br /></td></tr>
<tr class="separator:adac4ee359e6233cb2990b1047fd5be3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa36f62ea4ac87362e376e4cbea10098d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#aa36f62ea4ac87362e376e4cbea10098d">U8_BACK_N_UNSAFE</a>(s,  i,  n)</td></tr>
<tr class="memdesc:aa36f62ea4ac87362e376e4cbea10098d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the string offset from one code point boundary to the n-th one before it, i.e., move backward by n code points.  <a href="utf8_8h.html#aa36f62ea4ac87362e376e4cbea10098d">More...</a><br /></td></tr>
<tr class="separator:aa36f62ea4ac87362e376e4cbea10098d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0ce585952c8ba4b103fb6b7aea801ba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#ab0ce585952c8ba4b103fb6b7aea801ba">U8_BACK_N</a>(s,  start,  i,  n)</td></tr>
<tr class="memdesc:ab0ce585952c8ba4b103fb6b7aea801ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the string offset from one code point boundary to the n-th one before it, i.e., move backward by n code points.  <a href="utf8_8h.html#ab0ce585952c8ba4b103fb6b7aea801ba">More...</a><br /></td></tr>
<tr class="separator:ab0ce585952c8ba4b103fb6b7aea801ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a910ba47de6d82fafc25b5e12f3a68588"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a910ba47de6d82fafc25b5e12f3a68588">U8_SET_CP_LIMIT_UNSAFE</a>(s,  i)</td></tr>
<tr class="memdesc:a910ba47de6d82fafc25b5e12f3a68588"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust a random-access offset to a code point boundary after a code point.  <a href="utf8_8h.html#a910ba47de6d82fafc25b5e12f3a68588">More...</a><br /></td></tr>
<tr class="separator:a910ba47de6d82fafc25b5e12f3a68588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40fe523809a3a4e647e47513336b81d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a40fe523809a3a4e647e47513336b81d9">U8_SET_CP_LIMIT</a>(s,  start,  i,  length)</td></tr>
<tr class="memdesc:a40fe523809a3a4e647e47513336b81d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust a random-access offset to a code point boundary after a code point.  <a href="utf8_8h.html#a40fe523809a3a4e647e47513336b81d9">More...</a><br /></td></tr>
<tr class="separator:a40fe523809a3a4e647e47513336b81d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a871c415916e2232407c22e86d52d532a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="umachine_8h.html#a676114b1a64bb7c2de15c919a00b28df">U_CAPI</a> <a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a871c415916e2232407c22e86d52d532a">utf8_nextCharSafeBody</a> (const uint8_t *s, int32_t *pi, int32_t length, <a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a> c, <a class="el" href="umachine_8h.html#a349ef00011f20ccd1d3b424445681aa5">UBool</a> strict)</td></tr>
<tr class="memdesc:a871c415916e2232407c22e86d52d532a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for handling "next code point" with error-checking.  <a href="utf8_8h.html#a871c415916e2232407c22e86d52d532a">More...</a><br /></td></tr>
<tr class="separator:a871c415916e2232407c22e86d52d532a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e020bdd5f37df249701305449ab4f09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="umachine_8h.html#a676114b1a64bb7c2de15c919a00b28df">U_CAPI</a> int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a1e020bdd5f37df249701305449ab4f09">utf8_appendCharSafeBody</a> (uint8_t *s, int32_t i, int32_t length, <a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a> c, <a class="el" href="umachine_8h.html#a349ef00011f20ccd1d3b424445681aa5">UBool</a> *pIsError)</td></tr>
<tr class="memdesc:a1e020bdd5f37df249701305449ab4f09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for handling "append code point" with error-checking.  <a href="utf8_8h.html#a1e020bdd5f37df249701305449ab4f09">More...</a><br /></td></tr>
<tr class="separator:a1e020bdd5f37df249701305449ab4f09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d54c50adef226e7e7e7fef574159099"><td class="memItemLeft" align="right" valign="top"><a class="el" href="umachine_8h.html#a676114b1a64bb7c2de15c919a00b28df">U_CAPI</a> <a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a5d54c50adef226e7e7e7fef574159099">utf8_prevCharSafeBody</a> (const uint8_t *s, int32_t start, int32_t *pi, <a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a> c, <a class="el" href="umachine_8h.html#a349ef00011f20ccd1d3b424445681aa5">UBool</a> strict)</td></tr>
<tr class="memdesc:a5d54c50adef226e7e7e7fef574159099"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for handling "previous code point" with error-checking.  <a href="utf8_8h.html#a5d54c50adef226e7e7e7fef574159099">More...</a><br /></td></tr>
<tr class="separator:a5d54c50adef226e7e7e7fef574159099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5841b67d88632d294e5feabc4980855e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="umachine_8h.html#a676114b1a64bb7c2de15c919a00b28df">U_CAPI</a> int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utf8_8h.html#a5841b67d88632d294e5feabc4980855e">utf8_back1SafeBody</a> (const uint8_t *s, int32_t start, int32_t i)</td></tr>
<tr class="memdesc:a5841b67d88632d294e5feabc4980855e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for handling "skip backward one code point" with error-checking.  <a href="utf8_8h.html#a5841b67d88632d294e5feabc4980855e">More...</a><br /></td></tr>
<tr class="separator:a5841b67d88632d294e5feabc4980855e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>C API: 8-bit Unicode handling macros. </p>
<p>This file defines macros to deal with 8-bit Unicode (UTF-8) code units (bytes) and strings.</p>
<p>For more information see <a class="el" href="utf_8h.html" title="C API: Code point macros.">utf.h</a> and the ICU User Guide Strings chapter (<a href="https://unicode-org.github.io/icu/userguide/strings">https://unicode-org.github.io/icu/userguide/strings</a>).</p>
<p><em>Usage:</em> ICU coding guidelines for if() statements should be followed when using these macros. Compound statements (curly braces {}) must be used for if-else-while... bodies and all macro statements should be terminated with semicolon. </p>

<p class="definition">Definition in file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a8a013997e3d13c501ce73bc45e662881"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a013997e3d13c501ce73bc45e662881">&#9670;&nbsp;</a></span>U8_APPEND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_APPEND</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">capacity, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">isError&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    uint32_t __uc=(c); \</div>
<div class="line">    if(__uc&lt;=0x7f) { \</div>
<div class="line">        (s)[(i)++]=(uint8_t)__uc; \</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(__uc&lt;=0x7ff &amp;&amp; (i)+1&lt;(capacity)) { \</div>
<div class="line">        (s)[(i)++]=(uint8_t)((__uc&gt;&gt;6)|0xc0); \</div>
<div class="line">        (s)[(i)++]=(uint8_t)((__uc&amp;0x3f)|0x80); \</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>((__uc&lt;=0xd7ff || (0xe000&lt;=__uc &amp;&amp; __uc&lt;=0xffff)) &amp;&amp; (i)+2&lt;(capacity)) { \</div>
<div class="line">        (s)[(i)++]=(uint8_t)((__uc&gt;&gt;12)|0xe0); \</div>
<div class="line">        (s)[(i)++]=(uint8_t)(((__uc&gt;&gt;6)&amp;0x3f)|0x80); \</div>
<div class="line">        (s)[(i)++]=(uint8_t)((__uc&amp;0x3f)|0x80); \</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0xffff&lt;__uc &amp;&amp; __uc&lt;=0x10ffff &amp;&amp; (i)+3&lt;(capacity)) { \</div>
<div class="line">        (s)[(i)++]=(uint8_t)((__uc&gt;&gt;18)|0xf0); \</div>
<div class="line">        (s)[(i)++]=(uint8_t)(((__uc&gt;&gt;12)&amp;0x3f)|0x80); \</div>
<div class="line">        (s)[(i)++]=(uint8_t)(((__uc&gt;&gt;6)&amp;0x3f)|0x80); \</div>
<div class="line">        (s)[(i)++]=(uint8_t)((__uc&amp;0x3f)|0x80); \</div>
<div class="line">    } <span class="keywordflow">else</span> { \</div>
<div class="line">        (isError)=<span class="keyword">true</span>; \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
<div class="ttc" id="aumachine_8h_html_a983e6cc57f8c1b0c5b9ad9ceb290418a"><div class="ttname"><a href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div><div class="ttdeci">#define UPRV_BLOCK_MACRO_END</div><div class="ttdoc">Defined as &quot;while (false)&quot; by default.</div><div class="ttdef"><b>Definition:</b> <a href="umachine_8h_source.html#l00178">umachine.h:178</a></div></div>
<div class="ttc" id="aumachine_8h_html_abfdc26d020b4fab3ed5ca2b98fe5df43"><div class="ttname"><a href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a></div><div class="ttdeci">#define UPRV_BLOCK_MACRO_BEGIN</div><div class="ttdoc">Defined as the &quot;do&quot; keyword by default.</div><div class="ttdef"><b>Definition:</b> <a href="umachine_8h_source.html#l00169">umachine.h:169</a></div></div>
</div><!-- fragment -->
<p>Append a code point to a string, overwriting 1 to 4 bytes. </p>
<p>The offset points to the current end of the string contents and is advanced (post-increment). "Safe" macro, checks for a valid code point. If a non-ASCII code point is written, checks for sufficient space in the string. If the code point is not valid or trail bytes do not fit, then isError is set to true.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string buffer </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be i&lt;capacity </td></tr>
    <tr><td class="paramname">capacity</td><td>int32_t size of the string buffer </td></tr>
    <tr><td class="paramname">c</td><td>UChar32 code point to append </td></tr>
    <tr><td class="paramname">isError</td><td>output UBool set to true if an error occurs, otherwise not modified </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a154f04764da5af41729c4df6bf9e09f3" title="Append a code point to a string, overwriting 1 to 4 bytes.">U8_APPEND_UNSAFE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003346">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00459">459</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a154f04764da5af41729c4df6bf9e09f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a154f04764da5af41729c4df6bf9e09f3">&#9670;&nbsp;</a></span>U8_APPEND_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_APPEND_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    uint32_t __uc=(c); \</div>
<div class="line">    if(__uc&lt;=0x7f) { \</div>
<div class="line">        (s)[(i)++]=(uint8_t)__uc; \</div>
<div class="line">    } <span class="keywordflow">else</span> { \</div>
<div class="line">        if(__uc&lt;=0x7ff) { \</div>
<div class="line">            (s)[(i)++]=(uint8_t)((__uc&gt;&gt;6)|0xc0); \</div>
<div class="line">        } <span class="keywordflow">else</span> { \</div>
<div class="line">            if(__uc&lt;=0xffff) { \</div>
<div class="line">                (s)[(i)++]=(uint8_t)((__uc&gt;&gt;12)|0xe0); \</div>
<div class="line">            } <span class="keywordflow">else</span> { \</div>
<div class="line">                (s)[(i)++]=(uint8_t)((__uc&gt;&gt;18)|0xf0); \</div>
<div class="line">                (s)[(i)++]=(uint8_t)(((__uc&gt;&gt;12)&amp;0x3f)|0x80); \</div>
<div class="line">            } \</div>
<div class="line">            (s)[(i)++]=(uint8_t)(((__uc&gt;&gt;6)&amp;0x3f)|0x80); \</div>
<div class="line">        } \</div>
<div class="line">        (s)[(i)++]=(uint8_t)((__uc&amp;0x3f)|0x80); \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Append a code point to a string, overwriting 1 to 4 bytes. </p>
<p>The offset points to the current end of the string contents and is advanced (post-increment). "Unsafe" macro, assumes a valid code point and sufficient space in the string. Otherwise, the result is undefined.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string buffer </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
    <tr><td class="paramname">c</td><td>code point to append </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a8a013997e3d13c501ce73bc45e662881" title="Append a code point to a string, overwriting 1 to 4 bytes.">U8_APPEND</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003345">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00422">422</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="adac4ee359e6233cb2990b1047fd5be3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adac4ee359e6233cb2990b1047fd5be3c">&#9670;&nbsp;</a></span>U8_BACK_1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_BACK_1</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    if(<a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>((s)[--(i)])) { \</div>
<div class="line">        (i)=<a class="code" href="utf8_8h.html#a5841b67d88632d294e5feabc4980855e">utf8_back1SafeBody</a>(s, start, (i)); \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
<div class="ttc" id="autf8_8h_html_a5841b67d88632d294e5feabc4980855e"><div class="ttname"><a href="utf8_8h.html#a5841b67d88632d294e5feabc4980855e">utf8_back1SafeBody</a></div><div class="ttdeci">U_CAPI int32_t utf8_back1SafeBody(const uint8_t *s, int32_t start, int32_t i)</div><div class="ttdoc">Function for handling &quot;skip backward one code point&quot; with error-checking.</div></div>
<div class="ttc" id="autf8_8h_html_afed9fc9bf480bf15a2e6051774f2d80e"><div class="ttname"><a href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a></div><div class="ttdeci">#define U8_IS_TRAIL(c)</div><div class="ttdoc">Is this code unit (byte) a UTF-8 trail byte? (0x80..0xBF)</div><div class="ttdef"><b>Definition:</b> <a href="utf8_8h_source.html#l00190">utf8.h:190</a></div></div>
</div><!-- fragment -->
<p>Move the string offset from one code point boundary to the previous one. </p>
<p>(Pre-decrementing backward iteration.) The input offset may be the same as the string length. "Safe" macro, checks for illegal sequences and for string boundaries.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">start</td><td>int32_t starting string offset (usually 0) </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be start&lt;i </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a3969beb6252f8605ab678990c8af2f48" title="Move the string offset from one code point boundary to the previous one.">U8_BACK_1_UNSAFE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003358">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00791">791</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a3969beb6252f8605ab678990c8af2f48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3969beb6252f8605ab678990c8af2f48">&#9670;&nbsp;</a></span>U8_BACK_1_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_BACK_1_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    while(<a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>((s)[--(i)])) {} \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Move the string offset from one code point boundary to the previous one. </p>
<p>(Pre-decrementing backward iteration.) The input offset may be the same as the string length. "Unsafe" macro, assumes well-formed UTF-8.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#adac4ee359e6233cb2990b1047fd5be3c" title="Move the string offset from one code point boundary to the previous one.">U8_BACK_1</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003357">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00775">775</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="ab0ce585952c8ba4b103fb6b7aea801ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0ce585952c8ba4b103fb6b7aea801ba">&#9670;&nbsp;</a></span>U8_BACK_N</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_BACK_N</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    int32_t __N=(n); \</div>
<div class="line">    while(__N&gt;0 &amp;&amp; (i)&gt;(start)) { \</div>
<div class="line">        U8_BACK_1(s, start, i); \</div>
<div class="line">        --__N; \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Move the string offset from one code point boundary to the n-th one before it, i.e., move backward by n code points. </p>
<p>(Pre-decrementing backward iteration.) The input offset may be the same as the string length. "Safe" macro, checks for illegal sequences and for string boundaries.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">start</td><td>int32_t index of the start of the string </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be start&lt;i </td></tr>
    <tr><td class="paramname">n</td><td>number of code points to skip </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#aa36f62ea4ac87362e376e4cbea10098d" title="Move the string offset from one code point boundary to the n-th one before it, i.e....">U8_BACK_N_UNSAFE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003360">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00832">832</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="aa36f62ea4ac87362e376e4cbea10098d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa36f62ea4ac87362e376e4cbea10098d">&#9670;&nbsp;</a></span>U8_BACK_N_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_BACK_N_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    int32_t __N=(n); \</div>
<div class="line">    while(__N&gt;0) { \</div>
<div class="line">        U8_BACK_1_UNSAFE(s, i); \</div>
<div class="line">        --__N; \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Move the string offset from one code point boundary to the n-th one before it, i.e., move backward by n code points. </p>
<p>(Pre-decrementing backward iteration.) The input offset may be the same as the string length. "Unsafe" macro, assumes well-formed UTF-8.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
    <tr><td class="paramname">n</td><td>number of code points to skip </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#ab0ce585952c8ba4b103fb6b7aea801ba" title="Move the string offset from one code point boundary to the n-th one before it, i.e....">U8_BACK_N</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003359">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00810">810</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="ae534bfef078b4f5d09e8da543a779db7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae534bfef078b4f5d09e8da543a779db7">&#9670;&nbsp;</a></span>U8_COUNT_TRAIL_BYTES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_COUNT_TRAIL_BYTES</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">leadByte</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    (<a class="code" href="utf8_8h.html#adb9837ea38dd811524a5b761ddc2a2ca">U8_IS_LEAD</a>(leadByte) ? \</div>
<div class="line">        ((uint8_t)(leadByte)&gt;=0xe0)+((uint8_t)(leadByte)&gt;=0xf0)+1 : 0)</div>
<div class="ttc" id="autf8_8h_html_adb9837ea38dd811524a5b761ddc2a2ca"><div class="ttname"><a href="utf8_8h.html#adb9837ea38dd811524a5b761ddc2a2ca">U8_IS_LEAD</a></div><div class="ttdeci">#define U8_IS_LEAD(c)</div><div class="ttdoc">Is this code unit (byte) a UTF-8 lead byte? (0xC2..0xF4)</div><div class="ttdef"><b>Definition:</b> <a href="utf8_8h_source.html#l00181">utf8.h:181</a></div></div>
</div><!-- fragment -->
<p>Counts the trail bytes for a UTF-8 lead byte. </p>
<p>Returns 0 for 0..0xc1 as well as for 0xf5..0xff. leadByte might be evaluated multiple times.</p>
<p>This is internal since it is not meant to be called directly by external clients; however it is called by public macros in this file and thus must remain stable.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">leadByte</td><td>The first byte of a UTF-8 sequence. Must be 0..0xff. </td></tr>
  </table>
  </dd>
</dl>
<dl class="internal"><dt><b><a class="el" href="internal.html#_internal000165">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00056">56</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a32281421a1d07ef0de83e7f44c5d7ba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32281421a1d07ef0de83e7f44c5d7ba2">&#9670;&nbsp;</a></span>U8_COUNT_TRAIL_BYTES_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_COUNT_TRAIL_BYTES_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">leadByte</td><td>)</td>
          <td>&#160;&#160;&#160;    (((uint8_t)(leadByte)&gt;=0xc2)+((uint8_t)(leadByte)&gt;=0xe0)+((uint8_t)(leadByte)&gt;=0xf0))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Counts the trail bytes for a UTF-8 lead byte of a valid UTF-8 sequence. </p>
<p>Returns 0 for 0..0xc1. Undefined for 0xf5..0xff. leadByte might be evaluated multiple times.</p>
<p>This is internal since it is not meant to be called directly by external clients; however it is called by public macros in this file and thus must remain stable.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">leadByte</td><td>The first byte of a UTF-8 sequence. Must be 0..0xff. </td></tr>
  </table>
  </dd>
</dl>
<dl class="internal"><dt><b><a class="el" href="internal.html#_internal000166">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00071">71</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a6d4c94e845b059fddba0c51e9bad87fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d4c94e845b059fddba0c51e9bad87fd">&#9670;&nbsp;</a></span>U8_FWD_1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_FWD_1</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    uint8_t __b=(s)[(i)++]; \</div>
<div class="line">    if(<a class="code" href="utf8_8h.html#adb9837ea38dd811524a5b761ddc2a2ca">U8_IS_LEAD</a>(__b) &amp;&amp; (i)!=(length)) { \</div>
<div class="line">        uint8_t __t1=(s)[i]; \</div>
<div class="line">        if((0xe0&lt;=__b &amp;&amp; __b&lt;0xf0)) { \</div>
<div class="line">            if(<a class="code" href="utf8_8h.html#a3a06eab6584d228ea835b424e0591aec">U8_IS_VALID_LEAD3_AND_T1</a>(__b, __t1) &amp;&amp; \</div>
<div class="line">                    ++(i)!=(length) &amp;&amp; <a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>((s)[i])) { \</div>
<div class="line">                ++(i); \</div>
<div class="line">            } \</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(__b&lt;0xe0) { \</div>
<div class="line">            if(<a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>(__t1)) { \</div>
<div class="line">                ++(i); \</div>
<div class="line">            } \</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="comment">/* c&gt;=0xf0 */</span> { \</div>
<div class="line">            if(<a class="code" href="utf8_8h.html#a5525576b42e8b7b4240153d9403c47a2">U8_IS_VALID_LEAD4_AND_T1</a>(__b, __t1) &amp;&amp; \</div>
<div class="line">                    ++(i)!=(length) &amp;&amp; <a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>((s)[i]) &amp;&amp; \</div>
<div class="line">                    ++(i)!=(length) &amp;&amp; <a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>((s)[i])) { \</div>
<div class="line">                ++(i); \</div>
<div class="line">            } \</div>
<div class="line">        } \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
<div class="ttc" id="autf8_8h_html_a3a06eab6584d228ea835b424e0591aec"><div class="ttname"><a href="utf8_8h.html#a3a06eab6584d228ea835b424e0591aec">U8_IS_VALID_LEAD3_AND_T1</a></div><div class="ttdeci">#define U8_IS_VALID_LEAD3_AND_T1(lead, t1)</div><div class="ttdoc">Internal 3-byte UTF-8 validity check.</div><div class="ttdef"><b>Definition:</b> <a href="utf8_8h_source.html#l00098">utf8.h:98</a></div></div>
<div class="ttc" id="autf8_8h_html_a5525576b42e8b7b4240153d9403c47a2"><div class="ttname"><a href="utf8_8h.html#a5525576b42e8b7b4240153d9403c47a2">U8_IS_VALID_LEAD4_AND_T1</a></div><div class="ttdeci">#define U8_IS_VALID_LEAD4_AND_T1(lead, t1)</div><div class="ttdoc">Internal 4-byte UTF-8 validity check.</div><div class="ttdef"><b>Definition:</b> <a href="utf8_8h_source.html#l00115">utf8.h:115</a></div></div>
</div><!-- fragment -->
<p>Advance the string offset from one code point boundary to the next. </p>
<p>(Post-incrementing iteration.) "Safe" macro, checks for illegal sequences and for string boundaries.</p>
<p>The length can be negative for a NUL-terminated string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be i&lt;length </td></tr>
    <tr><td class="paramname">length</td><td>int32_t string length </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a64a8113aea2125f806cbf5d77294b3cd" title="Advance the string offset from one code point boundary to the next.">U8_FWD_1_UNSAFE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003348">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00507">507</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a64a8113aea2125f806cbf5d77294b3cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64a8113aea2125f806cbf5d77294b3cd">&#9670;&nbsp;</a></span>U8_FWD_1_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_FWD_1_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    (i)+=1+<a class="code" href="utf8_8h.html#a32281421a1d07ef0de83e7f44c5d7ba2">U8_COUNT_TRAIL_BYTES_UNSAFE</a>((s)[i]); \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
<div class="ttc" id="autf8_8h_html_a32281421a1d07ef0de83e7f44c5d7ba2"><div class="ttname"><a href="utf8_8h.html#a32281421a1d07ef0de83e7f44c5d7ba2">U8_COUNT_TRAIL_BYTES_UNSAFE</a></div><div class="ttdeci">#define U8_COUNT_TRAIL_BYTES_UNSAFE(leadByte)</div><div class="ttdoc">Counts the trail bytes for a UTF-8 lead byte of a valid UTF-8 sequence.</div><div class="ttdef"><b>Definition:</b> <a href="utf8_8h_source.html#l00071">utf8.h:71</a></div></div>
</div><!-- fragment -->
<p>Advance the string offset from one code point boundary to the next. </p>
<p>(Post-incrementing iteration.) "Unsafe" macro, assumes well-formed UTF-8.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a6d4c94e845b059fddba0c51e9bad87fd" title="Advance the string offset from one code point boundary to the next.">U8_FWD_1</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003347">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00490">490</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a9a311dc48b8aa1050345b886adabf213"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a311dc48b8aa1050345b886adabf213">&#9670;&nbsp;</a></span>U8_FWD_N</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_FWD_N</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    int32_t __N=(n); \</div>
<div class="line">    while(__N&gt;0 &amp;&amp; ((i)&lt;(length) || ((length)&lt;0 &amp;&amp; (s)[i]!=0))) { \</div>
<div class="line">        U8_FWD_1(s, i, length); \</div>
<div class="line">        --__N; \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Advance the string offset from one code point boundary to the n-th next one, i.e., move forward by n code points. </p>
<p>(Post-incrementing iteration.) "Safe" macro, checks for illegal sequences and for string boundaries.</p>
<p>The length can be negative for a NUL-terminated string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be i&lt;length </td></tr>
    <tr><td class="paramname">length</td><td>int32_t string length </td></tr>
    <tr><td class="paramname">n</td><td>number of code points to skip </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a8e8b4218834110431798cc84a0a664ae" title="Advance the string offset from one code point boundary to the n-th next one, i.e.,...">U8_FWD_N_UNSAFE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003350">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00565">565</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a8e8b4218834110431798cc84a0a664ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e8b4218834110431798cc84a0a664ae">&#9670;&nbsp;</a></span>U8_FWD_N_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_FWD_N_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    int32_t __N=(n); \</div>
<div class="line">    while(__N&gt;0) { \</div>
<div class="line">        U8_FWD_1_UNSAFE(s, i); \</div>
<div class="line">        --__N; \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Advance the string offset from one code point boundary to the n-th next one, i.e., move forward by n code points. </p>
<p>(Post-incrementing iteration.) "Unsafe" macro, assumes well-formed UTF-8.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
    <tr><td class="paramname">n</td><td>number of code points to skip </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a9a311dc48b8aa1050345b886adabf213" title="Advance the string offset from one code point boundary to the n-th next one, i.e.,...">U8_FWD_N</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003349">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00542">542</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a10a57a084d75604c4a81fb5eec46ae6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10a57a084d75604c4a81fb5eec46ae6a">&#9670;&nbsp;</a></span>U8_GET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_GET</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    int32_t _u8_get_index=(i); \</div>
<div class="line">    U8_SET_CP_START(s, start, _u8_get_index); \</div>
<div class="line">    U8_NEXT(s, _u8_get_index, length, c); \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Get a code point from a string at a random-access offset, without changing the offset. </p>
<p>The offset may point to either the lead byte or one of the trail bytes for a code point, in which case the macro will read all of the bytes for the code point.</p>
<p>The length can be negative for a NUL-terminated string.</p>
<p>If the offset points to an illegal UTF-8 byte sequence, then c is set to a negative value. Iteration through a string is more efficient with U8_NEXT_UNSAFE or U8_NEXT.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">start</td><td>int32_t starting string offset </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be start&lt;=i&lt;length </td></tr>
    <tr><td class="paramname">length</td><td>int32_t string length </td></tr>
    <tr><td class="paramname">c</td><td>output UChar32 variable, set to &lt;0 in case of an error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a125e5e7a4ef2f3f57b078f706b2b67f8" title="Get a code point from a string at a random-access offset, without changing the offset.">U8_GET_UNSAFE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003340">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00260">260</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="ad13323ca441892bdb6b49b6954ab9ffb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad13323ca441892bdb6b49b6954ab9ffb">&#9670;&nbsp;</a></span>U8_GET_OR_FFFD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_GET_OR_FFFD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    int32_t _u8_get_index=(i); \</div>
<div class="line">    U8_SET_CP_START(s, start, _u8_get_index); \</div>
<div class="line">    U8_NEXT_OR_FFFD(s, _u8_get_index, length, c); \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Get a code point from a string at a random-access offset, without changing the offset. </p>
<p>The offset may point to either the lead byte or one of the trail bytes for a code point, in which case the macro will read all of the bytes for the code point.</p>
<p>The length can be negative for a NUL-terminated string.</p>
<p>If the offset points to an illegal UTF-8 byte sequence, then c is set to U+FFFD. Iteration through a string is more efficient with U8_NEXT_UNSAFE or U8_NEXT_OR_FFFD.</p>
<p>This macro does not distinguish between a real U+FFFD in the text and U+FFFD returned for an ill-formed sequence. Use <a class="el" href="utf8_8h.html#a10a57a084d75604c4a81fb5eec46ae6a" title="Get a code point from a string at a random-access offset, without changing the offset.">U8_GET()</a> if that distinction is important.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">start</td><td>int32_t starting string offset </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be start&lt;=i&lt;length </td></tr>
    <tr><td class="paramname">length</td><td>int32_t string length </td></tr>
    <tr><td class="paramname">c</td><td>output UChar32 variable, set to U+FFFD in case of an error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a10a57a084d75604c4a81fb5eec46ae6a" title="Get a code point from a string at a random-access offset, without changing the offset.">U8_GET</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003341">Stable:</a></b></dt><dd>ICU 51 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00291">291</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a125e5e7a4ef2f3f57b078f706b2b67f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a125e5e7a4ef2f3f57b078f706b2b67f8">&#9670;&nbsp;</a></span>U8_GET_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_GET_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    int32_t _u8_get_unsafe_index=(int32_t)(i); \</div>
<div class="line">    U8_SET_CP_START_UNSAFE(s, _u8_get_unsafe_index); \</div>
<div class="line">    U8_NEXT_UNSAFE(s, _u8_get_unsafe_index, c); \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Get a code point from a string at a random-access offset, without changing the offset. </p>
<p>The offset may point to either the lead byte or one of the trail bytes for a code point, in which case the macro will read all of the bytes for the code point. The result is undefined if the offset points to an illegal UTF-8 byte sequence. Iteration through a string is more efficient with U8_NEXT_UNSAFE or U8_NEXT.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
    <tr><td class="paramname">c</td><td>output UChar32 variable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a10a57a084d75604c4a81fb5eec46ae6a" title="Get a code point from a string at a random-access offset, without changing the offset.">U8_GET</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003339">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00233">233</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a27c3748113bc63347a7fa3a4b2c71029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27c3748113bc63347a7fa3a4b2c71029">&#9670;&nbsp;</a></span>U8_INTERNAL_NEXT_OR_SUB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_INTERNAL_NEXT_OR_SUB</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sub&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    (c)=(uint8_t)(s)[(i)++]; \</div>
<div class="line">    if(!<a class="code" href="utf8_8h.html#a8f3a9427d880458a9fa6b169a3cc1b3c">U8_IS_SINGLE</a>(c)) { \</div>
<div class="line">        uint8_t __t = 0; \</div>
<div class="line">        if((i)!=(length) &amp;&amp; \</div>
<div class="line">            <span class="comment">/* fetch/validate/assemble all but last trail byte */</span> \</div>
<div class="line">            ((c)&gt;=0xe0 ? \</div>
<div class="line">                ((c)&lt;0xf0 ?  <span class="comment">/* U+0800..U+FFFF except surrogates */</span> \</div>
<div class="line">                    <a class="code" href="utf8_8h.html#aabfe8ee746b8025ec80ed1977e8ae3c6">U8_LEAD3_T1_BITS</a>[(c)&amp;=0xf]&amp;(1&lt;&lt;((__t=(s)[i])&gt;&gt;5)) &amp;&amp; \</div>
<div class="line">                    (__t&amp;=0x3f, 1) \</div>
<div class="line">                :  <span class="comment">/* U+10000..U+10FFFF */</span> \</div>
<div class="line">                    ((c)-=0xf0)&lt;=4 &amp;&amp; \</div>
<div class="line">                    <a class="code" href="utf8_8h.html#ab7b00ab82ca3e89d24c4088b2b4e9416">U8_LEAD4_T1_BITS</a>[(__t=(s)[i])&gt;&gt;4]&amp;(1&lt;&lt;(c)) &amp;&amp; \</div>
<div class="line">                    ((c)=((c)&lt;&lt;6)|(__t&amp;0x3f), ++(i)!=(length)) &amp;&amp; \</div>
<div class="line">                    (__t=(s)[i]-0x80)&lt;=0x3f) &amp;&amp; \</div>
<div class="line">                <span class="comment">/* valid second-to-last trail byte */</span> \</div>
<div class="line">                ((c)=((c)&lt;&lt;6)|__t, ++(i)!=(length)) \</div>
<div class="line">            :  <span class="comment">/* U+0080..U+07FF */</span> \</div>
<div class="line">                (c)&gt;=0xc2 &amp;&amp; ((c)&amp;=0x1f, 1)) &amp;&amp; \</div>
<div class="line">            <span class="comment">/* last trail byte */</span> \</div>
<div class="line">            (__t=(s)[i]-0x80)&lt;=0x3f &amp;&amp; \</div>
<div class="line">            ((c)=((c)&lt;&lt;6)|__t, ++(i), 1)) { \</div>
<div class="line">        } <span class="keywordflow">else</span> { \</div>
<div class="line">            (c)=(sub);  <span class="comment">/* ill-formed*/</span> \</div>
<div class="line">        } \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
<div class="ttc" id="autf8_8h_html_a8f3a9427d880458a9fa6b169a3cc1b3c"><div class="ttname"><a href="utf8_8h.html#a8f3a9427d880458a9fa6b169a3cc1b3c">U8_IS_SINGLE</a></div><div class="ttdeci">#define U8_IS_SINGLE(c)</div><div class="ttdoc">Does this code unit (byte) encode a code point by itself (US-ASCII 0..0x7f)?</div><div class="ttdef"><b>Definition:</b> <a href="utf8_8h_source.html#l00173">utf8.h:173</a></div></div>
<div class="ttc" id="autf8_8h_html_aabfe8ee746b8025ec80ed1977e8ae3c6"><div class="ttname"><a href="utf8_8h.html#aabfe8ee746b8025ec80ed1977e8ae3c6">U8_LEAD3_T1_BITS</a></div><div class="ttdeci">#define U8_LEAD3_T1_BITS</div><div class="ttdoc">Internal bit vector for 3-byte UTF-8 validity check, for use in U8_IS_VALID_LEAD3_AND_T1.</div><div class="ttdef"><b>Definition:</b> <a href="utf8_8h_source.html#l00091">utf8.h:91</a></div></div>
<div class="ttc" id="autf8_8h_html_ab7b00ab82ca3e89d24c4088b2b4e9416"><div class="ttname"><a href="utf8_8h.html#ab7b00ab82ca3e89d24c4088b2b4e9416">U8_LEAD4_T1_BITS</a></div><div class="ttdeci">#define U8_LEAD4_T1_BITS</div><div class="ttdoc">Internal bit vector for 4-byte UTF-8 validity check, for use in U8_IS_VALID_LEAD4_AND_T1.</div><div class="ttdef"><b>Definition:</b> <a href="utf8_8h_source.html#l00108">utf8.h:108</a></div></div>
</div><!-- fragment --><dl class="internal"><dt><b><a class="el" href="internal.html#_internal000176">Internal:</a></b></dt><dd>Do not use.</dd></dl>
<p>This API is for internal use only. </p>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00381">381</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="adb9837ea38dd811524a5b761ddc2a2ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb9837ea38dd811524a5b761ddc2a2ca">&#9670;&nbsp;</a></span>U8_IS_LEAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_IS_LEAD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td>&#160;&#160;&#160;((uint8_t)((c)-0xc2)&lt;=0x32)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is this code unit (byte) a UTF-8 lead byte? (0xC2..0xF4) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>8-bit code unit (byte) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true or false </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003335">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00181">181</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a8f3a9427d880458a9fa6b169a3cc1b3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f3a9427d880458a9fa6b169a3cc1b3c">&#9670;&nbsp;</a></span>U8_IS_SINGLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_IS_SINGLE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td>&#160;&#160;&#160;(((c)&amp;0x80)==0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does this code unit (byte) encode a code point by itself (US-ASCII 0..0x7f)? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>8-bit code unit (byte) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true or false </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003334">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00173">173</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="afed9fc9bf480bf15a2e6051774f2d80e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afed9fc9bf480bf15a2e6051774f2d80e">&#9670;&nbsp;</a></span>U8_IS_TRAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_IS_TRAIL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td>&#160;&#160;&#160;((int8_t)(c)&lt;-0x40)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is this code unit (byte) a UTF-8 trail byte? (0x80..0xBF) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>8-bit code unit (byte) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true or false </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003336">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00190">190</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a3a06eab6584d228ea835b424e0591aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a06eab6584d228ea835b424e0591aec">&#9670;&nbsp;</a></span>U8_IS_VALID_LEAD3_AND_T1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_IS_VALID_LEAD3_AND_T1</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">lead, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">t1&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(<a class="el" href="utf8_8h.html#aabfe8ee746b8025ec80ed1977e8ae3c6">U8_LEAD3_T1_BITS</a>[(lead)&amp;0xf]&amp;(1&lt;&lt;((uint8_t)(t1)&gt;&gt;5)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal 3-byte UTF-8 validity check. </p>
<p>Non-zero if lead byte E0..EF and first trail byte 00..FF start a valid sequence. </p><dl class="internal"><dt><b><a class="el" href="internal.html#_internal000169">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00098">98</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a5525576b42e8b7b4240153d9403c47a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5525576b42e8b7b4240153d9403c47a2">&#9670;&nbsp;</a></span>U8_IS_VALID_LEAD4_AND_T1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_IS_VALID_LEAD4_AND_T1</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">lead, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">t1&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(<a class="el" href="utf8_8h.html#ab7b00ab82ca3e89d24c4088b2b4e9416">U8_LEAD4_T1_BITS</a>[(uint8_t)(t1)&gt;&gt;4]&amp;(1&lt;&lt;((lead)&amp;7)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal 4-byte UTF-8 validity check. </p>
<p>Non-zero if lead byte F0..F4 and first trail byte 00..FF start a valid sequence. </p><dl class="internal"><dt><b><a class="el" href="internal.html#_internal000171">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00115">115</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="aabfe8ee746b8025ec80ed1977e8ae3c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabfe8ee746b8025ec80ed1977e8ae3c6">&#9670;&nbsp;</a></span>U8_LEAD3_T1_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_LEAD3_T1_BITS&#160;&#160;&#160;&quot;\x20\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x30\x10\x30\x30&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal bit vector for 3-byte UTF-8 validity check, for use in U8_IS_VALID_LEAD3_AND_T1. </p>
<p>Each bit indicates whether one lead byte + first trail byte pair starts a valid sequence. Lead byte E0..EF bits 3..0 are used as byte index, first trail byte bits 7..5 are used as bit index into that byte. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a3a06eab6584d228ea835b424e0591aec" title="Internal 3-byte UTF-8 validity check.">U8_IS_VALID_LEAD3_AND_T1</a> </dd></dl>
<dl class="internal"><dt><b><a class="el" href="internal.html#_internal000168">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00091">91</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="ab7b00ab82ca3e89d24c4088b2b4e9416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b00ab82ca3e89d24c4088b2b4e9416">&#9670;&nbsp;</a></span>U8_LEAD4_T1_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_LEAD4_T1_BITS&#160;&#160;&#160;&quot;\x00\x00\x00\x00\x00\x00\x00\x00\x1E\x0F\x0F\x0F\x00\x00\x00\x00&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal bit vector for 4-byte UTF-8 validity check, for use in U8_IS_VALID_LEAD4_AND_T1. </p>
<p>Each bit indicates whether one lead byte + first trail byte pair starts a valid sequence. First trail byte bits 7..4 are used as byte index, lead byte F0..F4 bits 2..0 are used as bit index into that byte. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a5525576b42e8b7b4240153d9403c47a2" title="Internal 4-byte UTF-8 validity check.">U8_IS_VALID_LEAD4_AND_T1</a> </dd></dl>
<dl class="internal"><dt><b><a class="el" href="internal.html#_internal000170">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00108">108</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="af1730b8bbb3053465ee58702821846f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1730b8bbb3053465ee58702821846f1">&#9670;&nbsp;</a></span>U8_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_LENGTH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    ((uint32_t)(c)&lt;=0x7f ? 1 : \</div>
<div class="line">        ((uint32_t)(c)&lt;=0x7ff ? 2 : \</div>
<div class="line">            ((uint32_t)(c)&lt;=0xd7ff ? 3 : \</div>
<div class="line">                ((uint32_t)(c)&lt;=0xdfff || (uint32_t)(c)&gt;0x10ffff ? 0 : \</div>
<div class="line">                    ((uint32_t)(c)&lt;=0xffff ? 3 : 4)\</div>
<div class="line">                ) \</div>
<div class="line">            ) \</div>
<div class="line">        ) \</div>
<div class="line">    )</div>
</div><!-- fragment -->
<p>How many code units (bytes) are used for the UTF-8 encoding of this Unicode code point? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>32-bit code point </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1..4, or 0 if c is a surrogate or not a Unicode code point </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003337">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00199">199</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="ae8ed1045986b8bf27814e9bc78388961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8ed1045986b8bf27814e9bc78388961">&#9670;&nbsp;</a></span>U8_MASK_LEAD_BYTE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_MASK_LEAD_BYTE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">leadByte, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">countTrailBytes&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((leadByte)&amp;=(1&lt;&lt;(6-(countTrailBytes)))-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mask a UTF-8 lead byte, leave only the lower bits that form part of the code point value. </p>
<p>This is internal since it is not meant to be called directly by external clients; however it is called by public macros in this file and thus must remain stable. </p><dl class="internal"><dt><b><a class="el" href="internal.html#_internal000167">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00081">81</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="aa2298b48749d9f45772c8f5a6885464a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2298b48749d9f45772c8f5a6885464a">&#9670;&nbsp;</a></span>U8_MAX_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_MAX_LENGTH&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The maximum number of UTF-8 code units (bytes) per Unicode code point (U+0000..U+10ffff). </p>
<dl class="section return"><dt>Returns</dt><dd>4 </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003338">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00215">215</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a57f3e5429ae4edb27a42367c627aa482"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f3e5429ae4edb27a42367c627aa482">&#9670;&nbsp;</a></span>U8_NEXT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_NEXT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="utf8_8h.html#a27c3748113bc63347a7fa3a4b2c71029">U8_INTERNAL_NEXT_OR_SUB</a>(s, i, length, c, <a class="el" href="umachine_8h.html#a807436737b76a72b76ddf0b900304b4a">U_SENTINEL</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a code point from a string at a code point boundary offset, and advance the offset to the next code point boundary. </p>
<p>(Post-incrementing forward iteration.) "Safe" macro, checks for illegal sequences and for string boundaries.</p>
<p>The length can be negative for a NUL-terminated string.</p>
<p>The offset may point to the lead byte of a multi-byte sequence, in which case the macro will read the whole sequence. If the offset points to a trail byte or an illegal UTF-8 sequence, then c is set to a negative value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be i&lt;length </td></tr>
    <tr><td class="paramname">length</td><td>int32_t string length </td></tr>
    <tr><td class="paramname">c</td><td>output UChar32 variable, set to &lt;0 in case of an error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a28ecdb4233301285fc4ce7f9ea1ed644" title="Get a code point from a string at a code point boundary offset, and advance the offset to the next co...">U8_NEXT_UNSAFE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003343">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00352">352</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a7dda2b78867c9d648ad5a0f400fdb1b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dda2b78867c9d648ad5a0f400fdb1b4">&#9670;&nbsp;</a></span>U8_NEXT_OR_FFFD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_NEXT_OR_FFFD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="utf8_8h.html#a27c3748113bc63347a7fa3a4b2c71029">U8_INTERNAL_NEXT_OR_SUB</a>(s, i, length, c, 0xfffd)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a code point from a string at a code point boundary offset, and advance the offset to the next code point boundary. </p>
<p>(Post-incrementing forward iteration.) "Safe" macro, checks for illegal sequences and for string boundaries.</p>
<p>The length can be negative for a NUL-terminated string.</p>
<p>The offset may point to the lead byte of a multi-byte sequence, in which case the macro will read the whole sequence. If the offset points to a trail byte or an illegal UTF-8 sequence, then c is set to U+FFFD.</p>
<p>This macro does not distinguish between a real U+FFFD in the text and U+FFFD returned for an ill-formed sequence. Use <a class="el" href="utf8_8h.html#a57f3e5429ae4edb27a42367c627aa482" title="Get a code point from a string at a code point boundary offset, and advance the offset to the next co...">U8_NEXT()</a> if that distinction is important.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be i&lt;length </td></tr>
    <tr><td class="paramname">length</td><td>int32_t string length </td></tr>
    <tr><td class="paramname">c</td><td>output UChar32 variable, set to U+FFFD in case of an error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a57f3e5429ae4edb27a42367c627aa482" title="Get a code point from a string at a code point boundary offset, and advance the offset to the next co...">U8_NEXT</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003344">Stable:</a></b></dt><dd>ICU 51 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00378">378</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a28ecdb4233301285fc4ce7f9ea1ed644"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28ecdb4233301285fc4ce7f9ea1ed644">&#9670;&nbsp;</a></span>U8_NEXT_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_NEXT_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    (c)=(uint8_t)(s)[(i)++]; \</div>
<div class="line">    if(!<a class="code" href="utf8_8h.html#a8f3a9427d880458a9fa6b169a3cc1b3c">U8_IS_SINGLE</a>(c)) { \</div>
<div class="line">        if((c)&lt;0xe0) { \</div>
<div class="line">            (c)=(((c)&amp;0x1f)&lt;&lt;6)|((s)[(i)++]&amp;0x3f); \</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>((c)&lt;0xf0) { \</div>
<div class="line">            <span class="comment">/* no need for (c&amp;0xf) because the upper bits are truncated after &lt;&lt;12 in the cast to (UChar) */</span> \</div>
<div class="line">            (c)=(<a class="code" href="umachine_8h.html#a6bb9fad572d65b305324ef288165e2ac">UChar</a>)(((c)&lt;&lt;12)|(((s)[i]&amp;0x3f)&lt;&lt;6)|((s)[(i)+1]&amp;0x3f)); \</div>
<div class="line">            (i)+=2; \</div>
<div class="line">        } <span class="keywordflow">else</span> { \</div>
<div class="line">            (c)=(((c)&amp;7)&lt;&lt;18)|(((s)[i]&amp;0x3f)&lt;&lt;12)|(((s)[(i)+1]&amp;0x3f)&lt;&lt;6)|((s)[(i)+2]&amp;0x3f); \</div>
<div class="line">            (i)+=3; \</div>
<div class="line">        } \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
<div class="ttc" id="aumachine_8h_html_a6bb9fad572d65b305324ef288165e2ac"><div class="ttname"><a href="umachine_8h.html#a6bb9fad572d65b305324ef288165e2ac">UChar</a></div><div class="ttdeci">char16_t UChar</div><div class="ttdoc">The base type for UTF-16 code units and pointers.</div><div class="ttdef"><b>Definition:</b> <a href="umachine_8h_source.html#l00418">umachine.h:418</a></div></div>
</div><!-- fragment -->
<p>Get a code point from a string at a code point boundary offset, and advance the offset to the next code point boundary. </p>
<p>(Post-incrementing forward iteration.) "Unsafe" macro, assumes well-formed UTF-8.</p>
<p>The offset may point to the lead byte of a multi-byte sequence, in which case the macro will read the whole sequence. The result is undefined if the offset points to a trail byte or an illegal UTF-8 sequence.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
    <tr><td class="paramname">c</td><td>output UChar32 variable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a57f3e5429ae4edb27a42367c627aa482" title="Get a code point from a string at a code point boundary offset, and advance the offset to the next co...">U8_NEXT</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003342">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00316">316</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a17287c1f01ce84fdf8852a756643b076"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17287c1f01ce84fdf8852a756643b076">&#9670;&nbsp;</a></span>U8_PREV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_PREV</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    (c)=(uint8_t)(s)[--(i)]; \</div>
<div class="line">    if(!<a class="code" href="utf8_8h.html#a8f3a9427d880458a9fa6b169a3cc1b3c">U8_IS_SINGLE</a>(c)) { \</div>
<div class="line">        (c)=<a class="code" href="utf8_8h.html#a5d54c50adef226e7e7e7fef574159099">utf8_prevCharSafeBody</a>((<span class="keyword">const</span> uint8_t *)s, start, &amp;(i), c, -1); \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
<div class="ttc" id="autf8_8h_html_a5d54c50adef226e7e7e7fef574159099"><div class="ttname"><a href="utf8_8h.html#a5d54c50adef226e7e7e7fef574159099">utf8_prevCharSafeBody</a></div><div class="ttdeci">U_CAPI UChar32 utf8_prevCharSafeBody(const uint8_t *s, int32_t start, int32_t *pi, UChar32 c, UBool strict)</div><div class="ttdoc">Function for handling &quot;previous code point&quot; with error-checking.</div></div>
</div><!-- fragment -->
<p>Move the string offset from one code point boundary to the previous one and get the code point between them. </p>
<p>(Pre-decrementing backward iteration.) "Safe" macro, checks for illegal sequences and for string boundaries.</p>
<p>The input offset may be the same as the string length. If the offset is behind a multi-byte sequence, then the macro will read the whole sequence. If the offset is behind a lead byte, then that itself will be returned as the code point. If the offset is behind an illegal UTF-8 sequence, then c is set to a negative value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">start</td><td>int32_t starting string offset (usually 0) </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be start&lt;i </td></tr>
    <tr><td class="paramname">c</td><td>output UChar32 variable, set to &lt;0 in case of an error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a5f78eb19a6b25f61dccbae45d6ecf955" title="Move the string offset from one code point boundary to the previous one and get the code point betwee...">U8_PREV_UNSAFE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003355">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00726">726</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="aeef5d89106e5cf1c48727100c0b315bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeef5d89106e5cf1c48727100c0b315bd">&#9670;&nbsp;</a></span>U8_PREV_OR_FFFD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_PREV_OR_FFFD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    (c)=(uint8_t)(s)[--(i)]; \</div>
<div class="line">    if(!<a class="code" href="utf8_8h.html#a8f3a9427d880458a9fa6b169a3cc1b3c">U8_IS_SINGLE</a>(c)) { \</div>
<div class="line">        (c)=<a class="code" href="utf8_8h.html#a5d54c50adef226e7e7e7fef574159099">utf8_prevCharSafeBody</a>((<span class="keyword">const</span> uint8_t *)s, start, &amp;(i), c, -3); \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Move the string offset from one code point boundary to the previous one and get the code point between them. </p>
<p>(Pre-decrementing backward iteration.) "Safe" macro, checks for illegal sequences and for string boundaries.</p>
<p>The input offset may be the same as the string length. If the offset is behind a multi-byte sequence, then the macro will read the whole sequence. If the offset is behind a lead byte, then that itself will be returned as the code point. If the offset is behind an illegal UTF-8 sequence, then c is set to U+FFFD.</p>
<p>This macro does not distinguish between a real U+FFFD in the text and U+FFFD returned for an ill-formed sequence. Use <a class="el" href="utf8_8h.html#a17287c1f01ce84fdf8852a756643b076" title="Move the string offset from one code point boundary to the previous one and get the code point betwee...">U8_PREV()</a> if that distinction is important.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">start</td><td>int32_t starting string offset (usually 0) </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be start&lt;i </td></tr>
    <tr><td class="paramname">c</td><td>output UChar32 variable, set to U+FFFD in case of an error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a17287c1f01ce84fdf8852a756643b076" title="Move the string offset from one code point boundary to the previous one and get the code point betwee...">U8_PREV</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003356">Stable:</a></b></dt><dd>ICU 51 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00757">757</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a5f78eb19a6b25f61dccbae45d6ecf955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f78eb19a6b25f61dccbae45d6ecf955">&#9670;&nbsp;</a></span>U8_PREV_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_PREV_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    (c)=(uint8_t)(s)[--(i)]; \</div>
<div class="line">    if(<a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>(c)) { \</div>
<div class="line">        uint8_t __b, __count=1, __shift=6; \</div>
<div class="line">\</div>
<div class="line">        <span class="comment">/* c is a trail byte */</span> \</div>
<div class="line">        (c)&amp;=0x3f; \</div>
<div class="line">        for(;;) { \</div>
<div class="line">            __b=(s)[--(i)]; \</div>
<div class="line">            if(__b&gt;=0xc0) { \</div>
<div class="line">                U8_MASK_LEAD_BYTE(__b, __count); \</div>
<div class="line">                (c)|=(<a class="code" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a>)__b&lt;&lt;__shift; \</div>
<div class="line">                break; \</div>
<div class="line">            } <span class="keywordflow">else</span> { \</div>
<div class="line">                (c)|=(<a class="code" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a>)(__b&amp;0x3f)&lt;&lt;__shift; \</div>
<div class="line">                ++__count; \</div>
<div class="line">                __shift+=6; \</div>
<div class="line">            } \</div>
<div class="line">        } \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
<div class="ttc" id="aumachine_8h_html_a09fff5c3b5a5b015324dc3ec3cf92809"><div class="ttname"><a href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a></div><div class="ttdeci">int32_t UChar32</div><div class="ttdoc">Define UChar32 as a type for single Unicode code points.</div><div class="ttdef"><b>Definition:</b> <a href="umachine_8h_source.html#l00467">umachine.h:467</a></div></div>
</div><!-- fragment -->
<p>Move the string offset from one code point boundary to the previous one and get the code point between them. </p>
<p>(Pre-decrementing backward iteration.) "Unsafe" macro, assumes well-formed UTF-8.</p>
<p>The input offset may be the same as the string length. If the offset is behind a multi-byte sequence, then the macro will read the whole sequence. If the offset is behind a lead byte, then that itself will be returned as the code point. The result is undefined if the offset is behind an illegal UTF-8 sequence.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
    <tr><td class="paramname">c</td><td>output UChar32 variable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a17287c1f01ce84fdf8852a756643b076" title="Move the string offset from one code point boundary to the previous one and get the code point betwee...">U8_PREV</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003354">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00684">684</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a40fe523809a3a4e647e47513336b81d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40fe523809a3a4e647e47513336b81d9">&#9670;&nbsp;</a></span>U8_SET_CP_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_SET_CP_LIMIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    if((start)&lt;(i) &amp;&amp; ((i)&lt;(length) || (length)&lt;0)) { \</div>
<div class="line">        U8_BACK_1(s, start, i); \</div>
<div class="line">        U8_FWD_1(s, i, length); \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Adjust a random-access offset to a code point boundary after a code point. </p>
<p>If the offset is behind a partial multi-byte sequence, then the offset is incremented to behind the whole sequence. Otherwise, it is not modified. The input offset may be the same as the string length. "Safe" macro, checks for illegal sequences and for string boundaries.</p>
<p>The length can be negative for a NUL-terminated string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">start</td><td>int32_t starting string offset (usually 0) </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be start&lt;=i&lt;=length </td></tr>
    <tr><td class="paramname">length</td><td>int32_t string length </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a910ba47de6d82fafc25b5e12f3a68588" title="Adjust a random-access offset to a code point boundary after a code point.">U8_SET_CP_LIMIT_UNSAFE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003362">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00875">875</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a910ba47de6d82fafc25b5e12f3a68588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a910ba47de6d82fafc25b5e12f3a68588">&#9670;&nbsp;</a></span>U8_SET_CP_LIMIT_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_SET_CP_LIMIT_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    U8_BACK_1_UNSAFE(s, i); \</div>
<div class="line">    U8_FWD_1_UNSAFE(s, i); \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Adjust a random-access offset to a code point boundary after a code point. </p>
<p>If the offset is behind a partial multi-byte sequence, then the offset is incremented to behind the whole sequence. Otherwise, it is not modified. The input offset may be the same as the string length. "Unsafe" macro, assumes well-formed UTF-8.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#a40fe523809a3a4e647e47513336b81d9" title="Adjust a random-access offset to a code point boundary after a code point.">U8_SET_CP_LIMIT</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003361">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00853">853</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="aa6d33627a8a5420a8f61e50da2aeca2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d33627a8a5420a8f61e50da2aeca2a">&#9670;&nbsp;</a></span>U8_SET_CP_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_SET_CP_START</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    if(<a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>((s)[(i)])) { \</div>
<div class="line">        (i)=<a class="code" href="utf8_8h.html#a5841b67d88632d294e5feabc4980855e">utf8_back1SafeBody</a>(s, start, (i)); \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Adjust a random-access offset to a code point boundary at the start of a code point. </p>
<p>If the offset points to a UTF-8 trail byte, then the offset is moved backward to the corresponding lead byte. Otherwise, it is not modified.</p>
<p>"Safe" macro, checks for illegal sequences and for string boundaries. Unlike <a class="el" href="utf8_8h.html#a47528ebb663f83216167be4d28b59230" title="If the string ends with a UTF-8 byte sequence that is valid so far but incomplete,...">U8_TRUNCATE_IF_INCOMPLETE()</a>, this macro always reads s[i].</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">start</td><td>int32_t starting string offset (usually 0) </td></tr>
    <tr><td class="paramname">i</td><td>int32_t string offset, must be start&lt;=i </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#ac46a385dbf64c97337522e1d1875a57e" title="Adjust a random-access offset to a code point boundary at the start of a code point.">U8_SET_CP_START_UNSAFE</a> </dd>
<dd>
<a class="el" href="utf8_8h.html#a47528ebb663f83216167be4d28b59230" title="If the string ends with a UTF-8 byte sequence that is valid so far but incomplete,...">U8_TRUNCATE_IF_INCOMPLETE</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003352">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00607">607</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="ac46a385dbf64c97337522e1d1875a57e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac46a385dbf64c97337522e1d1875a57e">&#9670;&nbsp;</a></span>U8_SET_CP_START_UNSAFE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_SET_CP_START_UNSAFE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    while(<a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>((s)[i])) { --(i); } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>Adjust a random-access offset to a code point boundary at the start of a code point. </p>
<p>If the offset points to a UTF-8 trail byte, then the offset is moved backward to the corresponding lead byte. Otherwise, it is not modified. "Unsafe" macro, assumes well-formed UTF-8.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">i</td><td>string offset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#aa6d33627a8a5420a8f61e50da2aeca2a" title="Adjust a random-access offset to a code point boundary at the start of a code point.">U8_SET_CP_START</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003351">Stable:</a></b></dt><dd>ICU 2.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00586">586</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<a id="a47528ebb663f83216167be4d28b59230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47528ebb663f83216167be4d28b59230">&#9670;&nbsp;</a></span>U8_TRUNCATE_IF_INCOMPLETE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define U8_TRUNCATE_IF_INCOMPLETE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">start, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">length&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <a class="code" href="umachine_8h.html#abfdc26d020b4fab3ed5ca2b98fe5df43">UPRV_BLOCK_MACRO_BEGIN</a> { \</div>
<div class="line">    if((length)&gt;(start)) { \</div>
<div class="line">        uint8_t __b1=s[(length)-1]; \</div>
<div class="line">        if(<a class="code" href="utf8_8h.html#a8f3a9427d880458a9fa6b169a3cc1b3c">U8_IS_SINGLE</a>(__b1)) { \</div>
<div class="line">            <span class="comment">/* common ASCII character */</span> \</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="utf8_8h.html#adb9837ea38dd811524a5b761ddc2a2ca">U8_IS_LEAD</a>(__b1)) { \</div>
<div class="line">            --(length); \</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>(__b1) &amp;&amp; ((length)-2)&gt;=(start)) { \</div>
<div class="line">            uint8_t __b2=s[(length)-2]; \</div>
<div class="line">            if(0xe0&lt;=__b2 &amp;&amp; __b2&lt;=0xf4) { \</div>
<div class="line">                if(__b2&lt;0xf0 ? <a class="code" href="utf8_8h.html#a3a06eab6584d228ea835b424e0591aec">U8_IS_VALID_LEAD3_AND_T1</a>(__b2, __b1) : \</div>
<div class="line">                        <a class="code" href="utf8_8h.html#a5525576b42e8b7b4240153d9403c47a2">U8_IS_VALID_LEAD4_AND_T1</a>(__b2, __b1)) { \</div>
<div class="line">                    (length)-=2; \</div>
<div class="line">                } \</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="utf8_8h.html#afed9fc9bf480bf15a2e6051774f2d80e">U8_IS_TRAIL</a>(__b2) &amp;&amp; ((length)-3)&gt;=(start)) { \</div>
<div class="line">                uint8_t __b3=s[(length)-3]; \</div>
<div class="line">                if(0xf0&lt;=__b3 &amp;&amp; __b3&lt;=0xf4 &amp;&amp; <a class="code" href="utf8_8h.html#a5525576b42e8b7b4240153d9403c47a2">U8_IS_VALID_LEAD4_AND_T1</a>(__b3, __b2)) { \</div>
<div class="line">                    (length)-=3; \</div>
<div class="line">                } \</div>
<div class="line">            } \</div>
<div class="line">        } \</div>
<div class="line">    } \</div>
<div class="line">} <a class="code" href="umachine_8h.html#a983e6cc57f8c1b0c5b9ad9ceb290418a">UPRV_BLOCK_MACRO_END</a></div>
</div><!-- fragment -->
<p>If the string ends with a UTF-8 byte sequence that is valid so far but incomplete, then reduce the length of the string to end before the lead byte of that incomplete sequence. </p>
<p>For example, if the string ends with E1 80, the length is reduced by 2.</p>
<p>In all other cases (the string ends with a complete sequence, or it is not possible for any further trail byte to extend the trailing sequence) the length remains unchanged.</p>
<p>Useful for processing text split across multiple buffers (save the incomplete sequence for later) and for optimizing iteration (check for string length only once per character).</p>
<p>"Safe" macro, checks for illegal sequences and for string boundaries. Unlike <a class="el" href="utf8_8h.html#aa6d33627a8a5420a8f61e50da2aeca2a" title="Adjust a random-access offset to a code point boundary at the start of a code point.">U8_SET_CP_START()</a>, this macro never reads s[length].</p>
<p>(In UTF-16, simply check for <a class="el" href="utf16_8h.html#ace839ae31a801fd9c53fa67c5f8b9144" title="Is this code unit a lead surrogate (U+d800..U+dbff)?">U16_IS_LEAD(last code unit)</a>.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>const uint8_t * string </td></tr>
    <tr><td class="paramname">start</td><td>int32_t starting string offset (usually 0) </td></tr>
    <tr><td class="paramname">length</td><td>int32_t string length (usually start&lt;=length) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="utf8_8h.html#aa6d33627a8a5420a8f61e50da2aeca2a" title="Adjust a random-access offset to a code point boundary at the start of a code point.">U8_SET_CP_START</a> </dd></dl>
<dl class="stable"><dt><b><a class="el" href="stable.html#_stable003353">Stable:</a></b></dt><dd>ICU 61 </dd></dl>

<p class="definition">Definition at line <a class="el" href="utf8_8h_source.html#l00639">639</a> of file <a class="el" href="utf8_8h_source.html">utf8.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1e020bdd5f37df249701305449ab4f09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e020bdd5f37df249701305449ab4f09">&#9670;&nbsp;</a></span>utf8_appendCharSafeBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="umachine_8h.html#a676114b1a64bb7c2de15c919a00b28df">U_CAPI</a> int32_t utf8_appendCharSafeBody </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a>&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="umachine_8h.html#a349ef00011f20ccd1d3b424445681aa5">UBool</a> *&#160;</td>
          <td class="paramname"><em>pIsError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for handling "append code point" with error-checking. </p>
<p>This is internal since it is not meant to be called directly by external clients; however it is called by public macros in this file and thus must remain stable, and should not be hidden when other internal functions are hidden (otherwise public macros would fail to compile). </p><dl class="internal"><dt><b><a class="el" href="internal.html#_internal000173">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

</div>
</div>
<a id="a5841b67d88632d294e5feabc4980855e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5841b67d88632d294e5feabc4980855e">&#9670;&nbsp;</a></span>utf8_back1SafeBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="umachine_8h.html#a676114b1a64bb7c2de15c919a00b28df">U_CAPI</a> int32_t utf8_back1SafeBody </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for handling "skip backward one code point" with error-checking. </p>
<p>This is internal since it is not meant to be called directly by external clients; however it is called by public macros in this file and thus must remain stable, and should not be hidden when other internal functions are hidden (otherwise public macros would fail to compile). </p><dl class="internal"><dt><b><a class="el" href="internal.html#_internal000175">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

</div>
</div>
<a id="a871c415916e2232407c22e86d52d532a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a871c415916e2232407c22e86d52d532a">&#9670;&nbsp;</a></span>utf8_nextCharSafeBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="umachine_8h.html#a676114b1a64bb7c2de15c919a00b28df">U_CAPI</a> <a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a> utf8_nextCharSafeBody </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>pi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a>&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="umachine_8h.html#a349ef00011f20ccd1d3b424445681aa5">UBool</a>&#160;</td>
          <td class="paramname"><em>strict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for handling "next code point" with error-checking. </p>
<p>This is internal since it is not meant to be called directly by external clients; however it is called by public macros in this file and thus must remain stable, and should not be hidden when other internal functions are hidden (otherwise public macros would fail to compile). </p><dl class="internal"><dt><b><a class="el" href="internal.html#_internal000172">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

</div>
</div>
<a id="a5d54c50adef226e7e7e7fef574159099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d54c50adef226e7e7e7fef574159099">&#9670;&nbsp;</a></span>utf8_prevCharSafeBody()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="umachine_8h.html#a676114b1a64bb7c2de15c919a00b28df">U_CAPI</a> <a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a> utf8_prevCharSafeBody </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>pi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="umachine_8h.html#a09fff5c3b5a5b015324dc3ec3cf92809">UChar32</a>&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="umachine_8h.html#a349ef00011f20ccd1d3b424445681aa5">UBool</a>&#160;</td>
          <td class="paramname"><em>strict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for handling "previous code point" with error-checking. </p>
<p>This is internal since it is not meant to be called directly by external clients; however it is called by public macros in this file and thus must remain stable, and should not be hidden when other internal functions are hidden (otherwise public macros would fail to compile). </p><dl class="internal"><dt><b><a class="el" href="internal.html#_internal000174">Internal:</a></b></dt><dd>Do not use. This API is for internal use only. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
