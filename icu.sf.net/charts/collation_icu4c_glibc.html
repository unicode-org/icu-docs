<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Collation: ICU4C vs. glibc</title>
<link rel="stylesheet" href="../icu.css" type="text/css" />
</head>
<body>
<!--#include virtual="../ssi/header.html" -->
<h2>Collation: ICU4C 2.8 vs. glibc-2.2.5-11.5</h2>
<p>The performance test takes a locale and creates a RuleBasedCollator with
default options. A large list of names is used as data in each test, where the
names vary according to language. Each Collation operation over the whole list
is repeated 1000 times. The percentage values in the final column are the most
useful. They measure differences, where positive is better for ICU4C, and
negative is better for the compared implementation.</p>
<h3 align="left">Key</h3>
<table border="1" cellspacing="0" cellpadding="4">
<tr>
<th align="left">Operation</th>
<th align="left">Units</th>
<th align="left">Description</th>
</tr>
<tr>
<td>strcoll</td>
<td>nanosecs</td>
<td>Timing for string collation, an incremental compare of strings.</td>
</tr>
<tr>
<td>keygen</td>
<td>nanosecs</td>
<td>Timing for generation of sort keys, used to 'precompile' information so
that subsequent operations can use binary comparison.</td>
</tr>
<tr>
<td>keylen</td>
<td>bytes/char</td>
<td>The average length of the generated sort keys, in bytes per character
(Unicode/ISO 10646 code point). Generally this is the important field for sort
key performance, since it directly impacts the time necessary for binary
comparison, and the overhead of memory usage and retrieval time for sort
keys.</td>
</tr>
</table>
<h3 align="left">Data</h3>
<pre>
                                      -------- ICU --------   ------ glibc -------      (GLIBC - ICU)/ICU
Locale     Data file                  strcoll keygen  keylen  strcoll keygen  keylen    coll  keygen  keylen
------------------------------------------------------------------------------------------------------------
en_US      TestNames_Latin.txt      |     442   2619    1.53  |  1582   3701    3.04 |  258%    41%     99%
da_DK      TestNames_Latin.txt      |     556   3629    1.53  |  1647   3792    3.00 |  196%     4%     96%
de_DE      TestNames_Latin.txt      |     440   2606    1.53  |  1558   3695    3.00 |  254%    42%     96%
fr_FR      TestNames_Latin.txt      |     443   3515    1.53  |  1560   3697    3.00 |  252%     5%     96%
ja_JP      TestNames_Latin.txt      |     439   2623    1.53  |  1175   1691    1.01 |  168%   -36%    -34%
ja_JP      TestNames_Japanese_h.txt |     503   2051    3.20  |  2347   2793    1.87 |  367%    36%    -41%
ja_JP      TestNames_Japanese_k.txt |     502   2043    3.20  |  1807   2159    1.87 |  260%     6%    -41%
ja_JP      TestNames_Asian.txt      |     596   1762    3.33  | 13735  14584    2.00 | 2205%   728%    -40%
zh_CN      TestNames_Latin.txt      |     440   2631    1.53  |  1584   3712    3.04 |  260%    41%     98%
zh_CN      TestNames_Chinese.txt    |     614   1430    4.20  |  3432   3366    3.52 |  459%   135%    -16%
zh_CN      TestNames_Simplified_Chin|     441   1042    3.95  |  3305   3298    3.50 |  649%   217%    -11%
zh_TW      TestNames_Latin.txt      |     441   2620    1.53  |  1581   3712    3.04 |  259%    42%     99%
zh_TW      TestNames_Chinese.txt    |     438   1025    3.93  |  3429   3379    3.52 |  683%   230%    -10%
ko_KR      TestNames_Latin.txt      |     443   2669    1.53  |  1191   1715    1.00 |  169%   -36%    -34%
ko_KR      TestNames_Korean.txt     |     828   1874    4.32  |  3419   2858    2.82 |  313%    53%    -35%
ru_RU      TestNames_Latin.txt      |     441   2604    1.53  |  1586   3714    3.00 |  260%    43%     96%
ru_RU      TestNames_Russian.txt    |     619   7184    1.55  |  3069   7710    3.00 |  396%     7%     93%
th_TH      TestNames_Latin.txt      |     481   3831    1.61  |  1590   3880    3.74 |  231%     1%    132%
th_TH      TestNames_Thai.txt       |     850   5395    1.53  |  5230  10967    3.81 |  515%   103%    149%
</pre>
<h3><i>Notes</i></h3>
<ol>
<li>We're not sure why Japanese keylens in glibc are so small; it seems
suspicious, so we are suspecting that they do not use a multilevel sort.</li>
<li>As with all performance measurements, the results will vary according to
the hardware and compiler. The strcoll operation is particularly sensitive; we
have found that even slight changes in code alignment can produce 10%
differences.</li>
<li>For more information on incremental vs. sort key comparison, the importance
of multi-level sorting, and other features of collation, see <a href=
"http://www.unicode.org/reports/tr10/">Unicode Collation (UCA)</a>.</li>
<li>For general information on ICU collation see <a href=
"/userguide/Collate_Intro.html">User Guide</a>.</li>
<li>For information on APIs, see <a href="/apiref/icu4c/ucol_8h.html">C</a>,
<a href="/apiref/icu4c/classCollator.html">C++</a>, or <a href=
"/apiref/icu4j/doc/com/ibm/icu/text/Collator.html">Java</a>. There is also a
JNI implementation for better speed in Java.</li>
</ol>
<!--#include virtual="../ssi/footer.html" -->
</body>
</html>
